<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title><%= product.name %> - Chi ti·∫øt s·∫£n ph·∫©m</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <link rel="stylesheet" href="/css/styles.css">
</head>
<body style="background-color: #0f0f2d; color: white;">
<%- include('partials/header') %>

    <div class="container mt-4">
        <!-- N√∫t quay l·∫°i -->
   <div class="row">
   <div class="col-md-2 ">
<a href="/" class="btn-back-bar">
    <i class="fas fa-chevron-left"></i> Quay l·∫°i
</a>
</div>
<div class="col-md-9 d-flex flex-column align-items-center justify-content-center text-center">
    <h1 class="text-center">G√† Fc Mobile Uy t√≠n s·ªë 1 Vi·ªát Nam</h1>
    <p class="text-center">Trang web mua b√°n g√≥i Trong Game FC Mobile.</p>
    </div>
</div>

        <div class="row">
            <!-- H·ªôp ch·ª©a ·∫£nh + th√¥ng tin s·∫£n ph·∫©m -->
            <div class="col-md-7">
                <div class="product-container d-flex p-3">
                    <!-- ·∫¢nh s·∫£n ph·∫©m -->
                    <div class="product-image">
                        <img src="<%= product.image %>" class="img-fluid rounded">
                    </div>
                    <!-- Th√¥ng tin s·∫£n ph·∫©m -->
                    <div class="product-info ms-3">
                        <h3><%= product.name %></h3>
                        <p>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê ƒê√£ b√°n <%= product.sold %>k</p>
                        <h4 class="text-warning">$<%= product.price %></h4>
                    </div>
                </div>
                <div class="border-top pt-3"></div>
                <!-- Khu v·ª±c ·∫£nh h∆∞·ªõng d·∫´n -->
                <div class="product-container d-flex p-3">
                    <img src="/images/huong-dan.jpg" class="img-fluid rounded" style="max-width: 100%;">
                </div>
                
            </div>

            <!-- Form nh·∫≠p th√¥ng tin ƒë∆°n h√†ng -->
            <div class="col-md-5">
                <div class="order-box p-4">
                    <h4>Th√¥ng tin Order</h4>
                    <form action="/order" method="POST">
                        <div class="mb-2">
                            <label class="form-label">Ph∆∞∆°ng th·ª©c ƒëƒÉng nh·∫≠p *</label>
                            <input type="text" name="login_method" id="input-method" class="form-control">
                        </div>
                        <div class="mb-2">
                            <label class="form-label">S·ªë ƒëi·ªán tho·∫°i *</label>
                            <input type="text" name="phone" id="input-phone" class="form-control">
                        </div>
                        <div class="mb-2">
                            <label class="form-label">T√†i kho·∫£n *</label>
                            <input type="text" name="account"  id="input-account" class="form-control">
                        </div>
                        <div class="mb-2">
                            <label class="form-label">M·∫≠t kh·∫©u *</label>
                            <input type="password" name="password" id="input-password" class="form-control">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">T√™n nh√¢n v·∫≠t</label>
                            <input type="text" name="character_name"  id="input-character_name" class="form-control">
                        </div>

                        <!-- Gi√° ti·ªÅn -->
                        <div class="border-top pt-3"></div>
                        
                        <div class="price-container">
                            <span class="price-label">Gi√° g·ªëc:</span>
                            <span class="price-value">151.000ƒë</span>
                        </div>
                        <div class="mb-3 price-container">
                            <span class="price-label">Gi·∫£m gi√°:</span>
                            <span class="price-value">151.000ƒë</span>
                        </div>
                        <div class="border-top pt-3"></div>
                        
                        <div class="mb-3 price-container">
                            <span class="h3 text-warning" >T·ªïng ti·ªÅn:</span>
                            <span class="h3 text-warning price-value">105.000ƒë</span>
                        </div>
                            <button id="btn-mua-ngay" type="button" class="btn btn-primary w-100">Mua ngay</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>


<!-- Popup Thanh To√°n -->
<<!-- Popup Thanh To√°n -->
<!-- Popup Thanh To√°n -->
<div id="popup-thanh-toan" class="popup-overlay">
    <div class="popup-content">
        <!-- N√∫t ƒë√≥ng -->
        <span class="close-popup">&times;</span>

        <!-- Ti√™u ƒë·ªÅ -->
        <h2 class="popup-title">THANH TO√ÅN ƒê∆†N H√ÄNG</h2>

        <div class="popup-body">
           
            <!-- üîπ Kh·ªëi ch·ª©a ·∫£nh s·∫£n ph·∫©m -->
            <div class="popup-box">
                <div class="popup-qr">
                        <div class="">
                        <h4> <%= product.name %></h4>
                        <p>‚≠êÔ∏è ƒê√£ b√°n: <span id="popup-sold"></span></p>
                        <p class="popup-price">T·ªïng ti·ªÅn: <span id="popup-total"></span></p>
                    </div>
                    <img  src="<%= product.image %>" alt="S·∫£n ph·∫©m" class="popup-product-img">
                </div>
            </div>

            <!-- üîπ Kh·ªëi ch·ª©a th√¥ng tin ƒë∆°n h√†ng -->
            <div class="popup-box">
                <div class="popup-order-info">
                    <p>Ph∆∞∆°ng th·ª©c: <span id="popup-method"></span></p>
                    <p>S·ªë ƒëi·ªán tho·∫°i: <span id="popup-phone"></span></p>
                    <p>T√†i kho·∫£n: <span id="popup-account"></span></p>
                    <p>M·∫≠t kh·∫©u: <span id="popup-password"></span></p>
                    <p>T√™n nh√¢n v·∫≠t: <span id="popup-character"></span></p>
                </div>
            </div>

            <!-- üîπ Kh·ªëi ch·ª©a m√£ QR -->
            <div class="popup-box">
                <div class="popup-qr">
                    <h4>Qu√©t m√£ QR ƒë·ªÉ thanh to√°n</h4>
                    <img id="popup-qr-img" src="<%= product.image %>" alt="M√£ QR">
                </div>
            </div>
        </div>
      


        <!-- üîπ N√∫t t·∫£i ·∫£nh thanh to√°n -->
        <div class="popup-box">
            <div class="upload-container">
                <label class="upload-label" for="upload">üì∑ T·∫£i ·∫£nh thanh to√°n</label>
                <input type="file" id="upload" accept="image/*" multiple>
                <div id="previewContainer" style="display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap;"></div>
            </div>
        </div>

        <!-- üîπ H∆∞·ªõng d·∫´n thanh to√°n -->
        <div class="popup-box">
            <div class="popup-guide">
                <h4>H∆Ø·ªöNG D·∫™N THANH TO√ÅN</h4>
                <p>B·∫°n vui l√≤ng qu√©t m√£ QR ƒë·ªÉ thanh to√°n. Sau khi chuy·ªÉn kho·∫£n th√†nh c√¥ng, h√£y nh·∫•n n√∫t x√°c nh·∫≠n.</p>
            </div>
        </div>

        <!-- üîπ N√∫t x√°c nh·∫≠n thanh to√°n -->
        <button id="btn-confirm-payment">X√ÅC NH·∫¨N THANH TO√ÅN</button>
    </div>
</div>

<!-- End Popup Thanh To√°n -->
    </div>

</body>
</html>
<script>
document.addEventListener("DOMContentLoaded", function () {
    document.getElementById("btn-mua-ngay").addEventListener("click", function () {
        // L·∫•y d·ªØ li·ªáu t·ª´ form
        let productImg = document.getElementById("product-img")?.src || "";
        let productName = document.getElementById("product-name")?.innerText || "Kh√¥ng c√≥ t√™n";
        let sold = document.getElementById("product-sold")?.innerText || "0";
        let method = document.getElementById("input-method")?.value || "Kh√¥ng c√≥ ph∆∞∆°ng th·ª©c";
        let phone = document.getElementById("input-phone")?.value || "Kh√¥ng c√≥ s·ªë ƒëi·ªán tho·∫°i";
        let account = document.getElementById("input-account")?.value || "Kh√¥ng c√≥ t√†i kho·∫£n";
        let password = document.getElementById("input-password")?.value || "Kh√¥ng c√≥ m·∫≠t kh·∫©u";
        let character = document.getElementById("input-character_name")?.value || "Kh√¥ng c√≥ t√™n nh√¢n v·∫≠t";
        let note = document.getElementById("input-note")?.value || "";
        let total = document.getElementById("total")?.innerText || "0ƒë";

        // Hi·ªÉn th·ªã popup
        document.getElementById("popup-thanh-toan").style.display = "flex";

        // G√°n d·ªØ li·ªáu v√†o popup
        // document.getElementById("popup-product-img").src = productImg;
        // document.getElementById("popup-product-name").innerText = productName;
        document.getElementById("popup-sold").innerText = sold;
        document.getElementById("popup-method").innerText = method;
        document.getElementById("popup-phone").innerText = phone;
        document.getElementById("popup-account").innerText = account;
        document.getElementById("popup-password").innerText = password;
        document.getElementById("popup-character").innerText = character;
        // document.getElementById("popup-note").value = note;
        document.getElementById("popup-total").innerText = total;

        // G√°n ·∫£nh QR (c·∫ßn c·∫≠p nh·∫≠t link ·∫£nh QR)
        // document.getElementById("popup-qr-img").src = "path/to/qr-code.png";
    });

    // ƒê√≥ng popup khi nh·∫•n n√∫t ƒë√≥ng
    document.querySelector(".close-popup").addEventListener("click", function () {
        document.getElementById("popup-thanh-toan").style.display = "none";
    });

// Upload file ·∫£nh
document.getElementById('upload').addEventListener('change', function (event) {
    const files = event.target.files; // L·∫•y danh s√°ch ·∫£nh
    const previewContainer = document.getElementById('previewContainer');

    for (let i = 0; i < files.length; i++) {
        const file = files[i];
        const reader = new FileReader();

        reader.onload = function (e) {
            // T·∫°o m·ªôt th·∫ª div ch·ª©a ·∫£nh v√† n√∫t x√≥a
            const imageWrapper = document.createElement('div');
            imageWrapper.style.position = 'relative';
            imageWrapper.style.display = 'inline-block';

            // T·∫°o ·∫£nh
            const img = document.createElement('img');
            img.src = e.target.result;
            img.style.width = '100px';
            img.style.height = '100px';
            img.style.objectFit = 'cover';
            img.style.borderRadius = '5px';
            img.style.border = '1px solid #ddd';
            img.style.marginRight = '10px';

            // T·∫°o n√∫t "‚ùå" ƒë·ªÉ x√≥a ·∫£nh
            const removeBtn = document.createElement('button');
            removeBtn.innerHTML = '‚ùå';
            removeBtn.style.position = 'absolute';
            removeBtn.style.top = '5px';
            removeBtn.style.right = '5px';
            removeBtn.style.background = 'red';
            removeBtn.style.color = 'white';
            removeBtn.style.border = 'none';
            removeBtn.style.borderRadius = '50%';
            removeBtn.style.width = '20px';
            removeBtn.style.height = '20px';
            removeBtn.style.cursor = 'pointer';
            removeBtn.style.fontSize = '12px';
            
            // S·ª± ki·ªán x√≥a ·∫£nh
            removeBtn.addEventListener('click', function () {
                previewContainer.removeChild(imageWrapper);
            });

            // Th√™m ·∫£nh v√† n√∫t x√≥a v√†o div b·ªçc
            imageWrapper.appendChild(img);
            imageWrapper.appendChild(removeBtn);
            previewContainer.appendChild(imageWrapper);
        };

        reader.readAsDataURL(file);
    }
});

// end upload ·∫£nh


});


</script>
